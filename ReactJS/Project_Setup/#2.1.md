# #2.1 React Router part One

## React-Router를 이용한 page routing

react-router를 이용해 클라이언트 사이드에서 이루어지는 라우팅을 간단하게 한다.

DOM에서도 사용이 가능하고 react-native에서도 사용이 가능하다.

---

## 1. npm install react-router-dom

- [HashRouter](#HashRouter)
- [BrowserRouter](#BrowserRouter)
- [Link](#Link)

### HashRouter

```jsx
<HashRouter
  basename={optionalString}
  getUserConfirmation={optionalFunc}
  hashType={optionalString}
>
  <App />
</HashRouter>
```

```jsx
<HashRouter basename="/calendar"/>
<Link to="/today"/> // renders <a href="#/calendar/today">
```

```jsx
<HashRouter
  getUserConfirmation={(message, callback) => {
    // this is the default behavior
    const allowTransition = window.confirm(message);
    callback(allowTransition);
  }}
/>
```

<br/>

### BrowserRouter

```jsx
<BrowserRouter
  basename={optionalString}
  forceRefresh={optionalBool}
  getUserConfirmation={optionalFunc}
  keyLength={optionalNumber}
>
  <App />
</BrowserRouter>
```

```jsx
<BrowserRouter basename="/calendar">
    <Link to="/today"/> // renders <a href="/calendar/today">
    <Link to="/tomorrow"/> // renders <a href="/calendar/tomorrow">
    ...
</BrowserRouter>
```

```jsx
<BrowserRouter
  getUserConfirmation={(message, callback) => {
    // this is the default behavior
    const allowTransition = window.confirm(message);
    callback(allowTransition);
  }}
/>
```

### Link

```jsx
<Link to="/about">About</Link>
to: string

<Link to="/courses?sort=name" />

<Link
  to={{
    pathname: "/courses",
    search: "?sort=name",
    hash: "#the-hash",
    state: { fromDashboard: true }
  }}
/>


<Link to={location => ({ ...location, pathname: "/courses" })} />

<Link to={location => `${location.pathname}?sort=name`} />
```

### Route

```jsx
import React from "react";
import ReactDOM from "react-dom";
import { BrowserRouter as Router, Route } from "react-router-dom";

ReactDOM.render(
  <Router>
    <div>
      <Route exact path="/">
        <Home />
      </Route>
      <Route path="/news">
        <NewsFeed />
      </Route>
    </div>
  </Router>,
  node
);

<div>
  <Home />
  <!-- react-empty: 2 -->
</div>

<div>
  <!-- react-empty: 1 -->
  <NewsFeed />
</div>

```

### Redirect

```jsx
<Route exact path="/">
  {loggedIn ? <Redirect to="/dashboard" /> : <PublicHomePage />}
</Route>

<Redirect to="/somewhere/else" />

<Redirect
  to={{
    pathname: "/login",
    search: "?utm=your+face",
    state: { referrer: currentLocation }
  }}
/>
```

위의 코드들은 [React-Router 공식 페이지](https://reactrouter.com/web/guides/quick-start)의 사용 예시이다.

<br/>

## 2. 프로젝트 예시

```jsx
import Recat from "react";
import {
  BrowserRouter as Router,
  Redirect,
  Route,
  Switch,
} from "react-router-dom";
import Home from "Routes/Home";
import TV from "Routes/TV";
import Search from "Routes/Search";
import Header from "Components/Header";

export default () => (
  <Router>
    <>
      <Header />
      <Switch>
        <Route path="/" exact component={Home}></Route>
        <Route path="/tv" component={TV}></Route>
        {/* <Route path="/tv/popular" render={() => <h1>Popular</h1>}></Route> */}
        <Route path="/search" component={Search}></Route>
        <Redirect from="*" to="/"></Redirect>
      </Switch>
    </>
  </Router>
);
```

```js
import {
  BrowserRouter as Router,
  Redirect,
  Route,
  Switch,
} from "react-router-dom";
```

해당 js파일에서 react-router-dom을 사용하려면 import 해야한다.

여기서는 BrowserRouter를 사용했으며 Router의 이름으로 태그가 생성된다. Route와 Switch 또한 import 되었다.

```jsx
<Route path="/" exact component={Home}></Route>
```

여기서 Route는 BrowserRouter를 의미하며 path="/" 를 통해서 최초의 경로를 지정해 줄 수 있고 거기에 exact를 통해서 해당 경로가 정확히 맞는것만 route 되도록 설정이 가능하다. component는 위치가 일치 할 때의 렌더링 할 React component를 의미한다.

```jsx
<Redirect from="*" to="/"></Redirect>
```

위의 명령을 통해서 위의 경우가 아닌 다른 경로 주소의 경우 모든 파일들이 "/" 으로 이동하는 동작을 설정한다.

```jsx
<>
  <Header />
  <Switch>
    <Route path="/" exact component={Home}></Route>
    <Route path="/tv" component={TV}></Route>
    {/* <Route path="/tv/popular" render={() => <h1>Popular</h1>}></Route> */}
    <Route path="/search" component={Search}></Route>
    <Redirect from="*" to="/"></Redirect>
  </Switch>
</>
```

Switch는 경로와 일치하는 첫번째 자식 `<Route>` 혹은 `<Redirect>`를 렌더링한다. 주석의 예시처럼 경로가 겹치는 경우 둘 다 렌더링 되기 때문에 필요하다. Switch의 특징은 경로를 독점적으로 렌더링한다는 것이다.
